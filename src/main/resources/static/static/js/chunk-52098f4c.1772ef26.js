(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52098f4c"],{2796:function(t,e,a){"use strict";var r=a("a9cb"),o=a.n(r);o.a},4731:function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"g",(function(){return s})),a.d(e,"a",(function(){return l}));var r=a("b775");function o(t){return Object(r["a"])({url:"/port/getPage",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/port/getPortList",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/port/delete",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/port/save",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/port/batchSave",method:"post",data:t})}},"58b2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"searchBody"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.showAddDialog}},[t._v("添加服务器")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showPortListDialog()}}},[t._v("端口管理")]),a("el-button",{on:{click:t.refreshServerList}},[t._v("刷新")])],1)],1),t._m(0)],1),a("el-table",{ref:"singleTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData,"row-key":"id","highlight-current-row":"",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"current-change":t.handleSelect}},[a("el-table-column",{attrs:{label:"行号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"服务器名称",prop:"serverName"}}),a("el-table-column",{attrs:{label:"地址",prop:"host"}}),a("el-table-column",{attrs:{label:"端口",prop:"port"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"密码",prop:"password"}}),a("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.stateList,(function(r,o){return e.row.state===r.state?a("span",{key:r+o,class:t.computeClass(e.row.state)},[t._v(" "+t._s(r.stateName)+" ")]):t._e()}))}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{label:"修改时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",title:"编辑"},on:{click:function(a){return t.showEditDialog(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini",title:"删除"},on:{click:function(a){return t.deleteData(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50],"page-size":t.searchForm.pageSize,"current-page":t.searchForm.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:t.dataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-drawer",{attrs:{title:"端口管理","with-header":!1,visible:t.portListDialog,direction:"rtl",size:"60%"},on:{"update:visible":function(e){t.portListDialog=e}}},[a("div",{staticClass:"drawer-body"},[a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-plus"},on:{click:t.showAddPortDialog}},[t._v("添加端口")]),a("el-button",{attrs:{size:"mini"},on:{click:t.refreshPortList}},[t._v("刷新")]),a("div",{staticStyle:{"font-size":"12px",color:"#606266",margin:"10px 0 5px 0"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"3px"}}),t._v("端口为异步添加, 请点击刷新查询端口是否添加完成")]),a("el-table",{attrs:{data:t.portList}},[a("el-table-column",{attrs:{property:"localPort",label:"本地端口"}}),a("el-table-column",{attrs:{property:"internetPort",label:"外网端口"}}),a("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{label:"修改时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",title:"编辑"},on:{click:function(a){return t.showEditPortDialog(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini",title:"删除"},on:{click:function(a){return t.deletePort(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50],"page-size":t.portSearchForm.pageSize,"current-page":t.portSearchForm.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:t.portDataTotal},on:{"size-change":t.handlePortSizeChange,"current-change":t.handlePortCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:"添加服务器",visible:t.addDialog,width:"30%"},on:{"update:visible":function(e){t.addDialog=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"名称",prop:"serverName"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.serverName,callback:function(e){t.$set(t.addForm,"serverName",e)},expression:"addForm.serverName"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"host"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.host,callback:function(e){t.$set(t.addForm,"host",e)},expression:"addForm.host"}})],1),a("el-form-item",{attrs:{label:"端口",prop:"port",rules:[{required:!0,message:"端口不能为空"},{type:"number",message:"端口必须为数字值"}]}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.port,callback:function(e){t.$set(t.addForm,"port",t._n(e))},expression:"addForm.port"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.username,callback:function(e){t.$set(t.addForm,"username",e)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmAddForm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加端口",visible:t.addPortDialog,width:"30%"},on:{"update:visible":function(e){t.addPortDialog=e}}},[a("el-form",{ref:"addPortForm",attrs:{model:t.addPortForm,rules:t.addPortFormRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"本地端口",prop:"localPort",rules:[{required:!0,message:"端口不能为空"}]}},[a("el-input",{attrs:{size:"mini",placeholder:"单端口如:80,多端口80-83"},model:{value:t.addPortForm.localPort,callback:function(e){t.$set(t.addPortForm,"localPort",e)},expression:"addPortForm.localPort"}})],1),a("el-form-item",{attrs:{label:"外网端口",prop:"internetPort"}},[a("el-input",{attrs:{size:"mini",placeholder:"不填默认和本地端口相同"},model:{value:t.addPortForm.internetPort,callback:function(e){t.$set(t.addPortForm,"internetPort",e)},expression:"addPortForm.internetPort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addPortDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmAddPort}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改端口",visible:t.editPortDialog,width:"30%"},on:{"update:visible":function(e){t.editPortDialog=e}}},[a("el-form",{ref:"editPortForm",attrs:{model:t.editPortForm,rules:t.addPortFormRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"本地端口",prop:"localPort",rules:[{required:!0,message:"端口不能为空"},{type:"number",message:"端口必须为数字值"}]}},[a("el-input",{attrs:{size:"mini"},model:{value:t.editPortForm.localPort,callback:function(e){t.$set(t.editPortForm,"localPort",t._n(e))},expression:"editPortForm.localPort"}})],1),a("el-form-item",{attrs:{label:"外网端口",prop:"internetPort",rules:[{required:!0,message:"端口不能为空"},{type:"number",message:"端口必须为数字值"}]}},[a("el-input",{attrs:{size:"mini"},model:{value:t.editPortForm.internetPort,callback:function(e){t.$set(t.editPortForm,"internetPort",t._n(e))},expression:"editPortForm.internetPort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editPortDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmEditPort}},[t._v("确 定")])],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticStyle:{"font-size":"12px",color:"#606266"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"3px"}}),t._v("添加服务器后, 选中服务器点 端口管理 按钮维护端口")])}],i=a("aa22"),n=a("4731"),s={computed:{},data:function(){return{tableData:[],dataTotal:null,portDataTotal:null,searchForm:{pageSize:10,pageNum:1},portSearchForm:{pageSize:10,pageNum:1,serverId:null},addForm:{id:null,serverName:null,addType:"add",password:null},addPortForm:{id:null,username:null,password:null},addFormRules:{serverName:[{required:!0,trigger:"blur",message:"必需项"}],host:[{required:!0,trigger:"blur",message:"必需项"}],username:[{required:!0,trigger:"blur",message:"必需项"}]},addPortFormRules:{},addDialog:!1,selectedRow:null,portList:[],portListDialog:!1,addPortDialog:!1,editPortDialog:!1,editPortForm:{},stateList:[{state:1,stateName:"初始化中"},{state:2,stateName:"连接失败"},{state:3,stateName:"在线"}]}},mounted:function(){this.getData()},methods:{computeClass:function(t){if(t){if(1===t)return"state-normal";if(2===t)return"state-fail";if(3===t)return"state-online"}return"state-normal"},getData:function(){var t=this;Object(i["c"])(this.searchForm).then((function(e){t.tableData=e.data.list,t.dataTotal=e.data.total}))},refreshServerList:function(){var t=this;Object(i["c"])(this.searchForm).then((function(e){t.$notify({message:"刷新成功",type:"success"}),t.tableData=e.data.list,t.dataTotal=e.data.total}))},deleteData:function(t){var e=this;this.$confirm("确认删除?",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])({id:t.id}).then((function(t){e.$notify({message:"删除成功",type:"success"}),e.getData()}))}))},confirmAddForm:function(){var t=this;this.$refs["addForm"].validate((function(e){if(e){if("add"===t.addForm.addType&&!t.addForm.password)return void t.$notify({message:"密码不能为空",type:"warning"});Object(i["d"])(t.addForm).then((function(e){t.$notify({message:"保存成功",type:"success"}),t.addDialog=!1,t.getData()}))}}))},handleSizeChange:function(t){this.searchForm.pageSize=t,this.getData()},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.getData()},handlePortSizeChange:function(t){var e=this;this.portSearchForm.pageSize=t,Object(n["e"])(this.portSearchForm).then((function(t){e.portList=t.data.list,e.portDataTotal=t.data.total}))},handlePortCurrentChange:function(t){var e=this;this.portSearchForm.pageNum=t,Object(n["e"])(this.portSearchForm).then((function(t){e.portList=t.data.list,e.portDataTotal=t.data.total}))},refreshPortList:function(){var t=this;Object(n["e"])(this.portSearchForm).then((function(e){t.portList=e.data.list,t.portDataTotal=e.data.total}))},showAddDialog:function(){this.addDialog=!0,this.addForm.addType="add",this.addForm.id=null},showEditDialog:function(t){this.addDialog=!0,this.addForm=t,this.addForm.password=null,this.addForm.addType="edit"},showPortListDialog:function(){var t=this;this.selectedRow?(this.portListDialog=!0,this.portSearchForm.serverId=this.selectedRow.id,Object(n["e"])(this.portSearchForm).then((function(e){t.portList=e.data.list,t.portDataTotal=e.data.total}))):this.$notify({message:"请选择服务器",type:"warning"})},handleSelect:function(t){this.selectedRow=t},deletePort:function(t){var e=this;this.$confirm("确认删除?",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["c"])({id:t.id}).then((function(t){e.$notify({message:"删除成功",type:"success"}),Object(n["e"])(e.portSearchForm).then((function(t){e.portList=t.data.list,e.portDataTotal=t.data.total}))}))}))},showAddPortDialog:function(){this.addPortDialog=!0},confirmAddPort:function(){var t=this;this.$refs["addPortForm"].validate((function(e){e&&(t.addPortForm.serverId=t.selectedRow.id,Object(n["a"])(t.addPortForm).then((function(e){t.$notify({message:"请求添加成功,请点击刷新按钮查看添加进度",type:"success"}),t.addPortDialog=!1,Object(n["e"])(t.portSearchForm).then((function(e){t.portList=e.data.list,t.portDataTotal=e.data.total}))})))}))},showEditPortDialog:function(t){this.editPortDialog=!0,this.editPortForm=t},confirmEditPort:function(){var t=this;this.$refs["editPortForm"].validate((function(e){e&&Object(n["g"])(t.editPortForm).then((function(e){t.$notify({message:"保存成功",type:"success"}),t.editPortDialog=!1,Object(n["e"])(t.portSearchForm).then((function(e){t.portList=e.data.list,t.portDataTotal=e.data.total}))}))}))}}},l=s,d=(a("2796"),a("2877")),c=Object(d["a"])(l,r,o,!1,null,"3168de01",null);e["default"]=c.exports},a9cb:function(t,e,a){},aa22:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return s}));var r=a("b775");function o(t){return Object(r["a"])({url:"/server/getPage",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/server/getList",method:"get",data:t})}function n(t){return Object(r["a"])({url:"/server/delete",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/server/save",method:"post",data:t})}}}]);