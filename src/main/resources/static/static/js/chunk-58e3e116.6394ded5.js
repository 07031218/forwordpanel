(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e3e116"],{"1b8f":function(t,e,a){"use strict";var r=a("6919"),o=a.n(r);o.a},"36fb":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"行号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"中站服务器",prop:"serverName"}}),a("el-table-column",{attrs:{label:"中转端口",prop:"internetPort"}}),a("el-table-column",{attrs:{label:"被中转地址",prop:"remoteHost"}}),a("el-table-column",{attrs:{label:"被中转端口",prop:"remotePort"}}),a("el-table-column",{attrs:{label:"所属用户",prop:"username"}}),a("el-table-column",{attrs:{label:"已用流量",prop:"dataUsage"}}),a("el-table-column",{attrs:{label:"是否启动"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.disabled?"已停止":"已启动")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disabled?a("el-button",{attrs:{type:"success",size:"mini",title:"启用中转"},on:{click:function(a){return t.showStartDialog(e.row)}}},[t._v("启动中转")]):t._e(),e.row.disabled?t._e():a("el-button",{attrs:{type:"danger",size:"mini",title:"停止中转"},on:{click:function(a){return t.stopForward(e.row)}}},[t._v("停止中转")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50],"page-size":t.searchForm.pageSize,"current-page":t.searchForm.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:t.dataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"启动转发",visible:t.startDialog,width:"30%"},on:{"update:visible":function(e){t.startDialog=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"域名(或IP)",prop:"remoteHost"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.remoteHost,callback:function(e){t.$set(t.addForm,"remoteHost",e)},expression:"addForm.remoteHost"}})],1),a("el-form-item",{attrs:{label:"端口",prop:"remotePort",rules:[{required:!0,message:"端口不能为空"},{type:"number",message:"端口必须为数字值"}]}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.remotePort,callback:function(e){t.$set(t.addForm,"remotePort",t._n(e))},expression:"addForm.remotePort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.startDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmStart(t.row)}}},[t._v("确 定")])],1)],1)],1)},o=[],s=a("b775");function l(t){return Object(s["a"])({url:"/forward/getPage",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/forward/start",method:"post",data:t})}function i(t){return Object(s["a"])({url:"/forward/stop",method:"post",data:t})}var d={data:function(){return{tableData:[],dataTotal:null,searchForm:{pageSize:10,pageNum:1},userTypeList:[{name:"管理员",value:0},{name:"普通用户",value:1}],addForm:{id:null,username:null,addType:"add",password:null},addFormRules:{remoteHost:[{required:!0,trigger:"blur",message:"必需项"}]},startDialog:!1}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;l(this.searchForm).then((function(e){t.tableData=e.data.list,t.dataTotal=e.data.total}))},confirmStart:function(){var t=this;this.$refs["addForm"].validate((function(e){e&&n(t.addForm).then((function(e){t.$notify({message:"启动成功",type:"success"}),t.startDialog=!1,t.getData()}))}))},handleSizeChange:function(t){this.searchForm.pageSize=t,this.getData()},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.getData()},showStartDialog:function(t){this.startDialog=!0,this.addForm.serverId=t.serverId,this.addForm.portId=t.portId},stopForward:function(t){var e=this;this.addForm.serverId=t.serverId,this.addForm.portId=t.portId,i(this.addForm).then((function(t){e.$notify({message:"停止完成",type:"success"}),e.getData()}))}}},u=d,c=(a("1b8f"),a("2877")),m=Object(c["a"])(u,r,o,!1,null,"067542d3",null);e["default"]=m.exports},6919:function(t,e,a){}}]);