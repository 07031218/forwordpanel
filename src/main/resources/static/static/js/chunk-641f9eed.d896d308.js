(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-641f9eed"],{"0732":function(t,e,a){"use strict";var r=a("d3f9"),o=a.n(r);o.a},1148:function(t,e,a){"use strict";var r=a("a691"),o=a("1d80");t.exports="".repeat||function(t){var e=String(o(this)),a="",n=r(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"1d2c":function(t,e,a){},"36fb":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"top-pannel"},[a("span",{staticClass:"top-span"},[a("span",[t._v("当前账户:")]),t._v(" "),a("span",{staticClass:"top-text"},[a("el-select",{attrs:{size:"mini",filterable:""},on:{change:t.handleSelectUser},model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}},t._l(t.userList,(function(t,e){return a("el-option",{key:t+e,attrs:{label:t.username,value:t.id}})})),1)],1)]),a("span",{staticClass:"top-span"},[a("span",[t._v("账户到期时间:")]),t._v(" "),a("span",{staticClass:"top-text"},[t._v(t._s(t._f("parseTime")(t.userDetail.expireTime,"{y}-{m}-{d}")))])]),a("span",{staticClass:"top-span"},[a("span",[t._v("账户流量:")]),t._v(" "),a("span",{staticClass:"top-text"},[t._v(t._s(t.getFlow(t.userDetail.dataUsage))+"/"+t._s(t.userDetail.dataLimit<=0?"不限制":t.userDetail.dataLimit+"G"))])]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.refreshData()}}},[t._v("刷新")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.showDataDetail()}}},[t._v("流量使用详情")]),t.checkUserDisabled()?a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.showContactInfo()}}},[t._v("账号被禁用,点击联系管理员")]):t._e()],1),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"行号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"中站服务器",prop:"serverName"}}),a("el-table-column",{attrs:{label:"中转地址",prop:"serverHost"}}),a("el-table-column",{attrs:{label:"中转端口",prop:"internetPort"}}),a("el-table-column",{attrs:{label:"被中转地址",prop:"remoteHost"}}),a("el-table-column",{attrs:{label:"被中转端口",prop:"remotePort"}}),a("el-table-column",{attrs:{label:"所属用户",prop:"username"}}),a("el-table-column",{attrs:{label:"是否启动"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.disabled?"已停止":"已启动")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disabled?a("el-button",{attrs:{type:"success",size:"mini",title:"启用中转"},on:{click:function(a){return t.showStartDialog(e.row)}}},[t._v("启动中转")]):t._e(),e.row.disabled?t._e():a("el-button",{attrs:{loading:!!e.row.btnLoading,type:"danger",size:"mini",title:"停止中转"},on:{click:function(a){return t.stopForward(e.row)}}},[t._v("停止中转")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50],"page-size":t.searchForm.pageSize,"current-page":t.searchForm.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:t.dataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"启动转发",visible:t.startDialog,width:"30%"},on:{"update:visible":function(e){t.startDialog=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"域名(或IP)",prop:"remoteHost"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.remoteHost,callback:function(e){t.$set(t.addForm,"remoteHost",e)},expression:"addForm.remoteHost"}})],1),a("el-form-item",{attrs:{label:"端口",prop:"remotePort",rules:[{required:!0,message:"端口不能为空"},{type:"number",message:"端口必须为数字值"}]}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.remotePort,callback:function(e){t.$set(t.addForm,"remotePort",t._n(e))},expression:"addForm.remotePort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.startDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:function(e){return t.confirmStart(t.row)}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"联系方式",visible:t.contactInfoDialog,width:"30%"},on:{"update:visible":function(e){t.contactInfoDialog=e}}},[a("el-form",{attrs:{"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"TG:"}},[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:t.contactInfo.telegram}},[t._v(t._s(t.contactInfo.telegram))])]),a("el-form-item",{attrs:{label:"QQ:"}},[a("span",[t._v(t._s(t.contactInfo.qq))])]),a("el-form-item",{attrs:{label:"邮箱:"}},[a("span",[t._v(t._s(t.contactInfo.email))])])],1)],1),a("el-drawer",{attrs:{title:"流量使用详情","with-header":!1,visible:t.forwardFlowDialog,direction:"rtl",size:"60%"},on:{"update:visible":function(e){t.forwardFlowDialog=e}}},[a("div",{staticClass:"drawer-body"},[a("el-table",{attrs:{data:t.forwardFlowList}},[a("el-table-column",{attrs:{property:"serverName",label:"所属服务"}}),a("el-table-column",{attrs:{property:"localPort",label:"本地端口"}}),a("el-table-column",{attrs:{property:"internetPort",label:"外网端口"}}),a("el-table-column",{attrs:{property:"remoteHost",label:"被转域名"}}),a("el-table-column",{attrs:{property:"remotePort",label:"被转端口"}}),a("el-table-column",{attrs:{label:"已用流量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getFlow(e.row.dataUsage))+" ")]}}])})],1)],1)])],1)},o=[],n=(a("a9e3"),a("b680"),a("b775"));function s(t){return Object(n["a"])({url:"/forward/getPage",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/forward/start",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/forward/stop",method:"post",data:t})}var c=a("c24f"),u=a("5f87"),d=a("8593"),f={data:function(){return{tableData:[],dataTotal:null,loading:!1,searchForm:{userId:null,pageSize:10,pageNum:1},userTypeList:[{name:"管理员",value:0},{name:"普通用户",value:1}],addForm:{id:null,username:null,addType:"add",password:null,remotePort:null,remoteHost:null},addFormRules:{remoteHost:[{required:!0,trigger:"blur",message:"必需项"}]},startDialog:!1,userList:[],selectedUser:null,userDetail:{dataUsage:0,dataLimit:0},forwardFlowDialog:!1,forwardFlowList:[],contactInfoDialog:!1,contactInfo:{}}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Object(c["n"])({}).then((function(e){t.userList=e.data,t.selectedUser=Number(Object(u["a"])()),Object(c["m"])({}).then((function(e){t.userDetail=e.data})),s(t.searchForm).then((function(e){t.tableData=e.data.list,t.dataTotal=e.data.total}))}))},checkUserDisabled:function(){var t=Object(c["k"])();return!(!t||!t.disabled)},confirmStart:function(){var t=this;this.$refs["addForm"].validate((function(e){e&&(t.loading=!0,i(t.addForm).then((function(e){t.loading=!1,t.$notify({message:"启动成功",type:"success"}),t.startDialog=!1,t.getData()})))}))},handleSelectUser:function(t){var e=this;this.searchForm.userId=t,s(this.searchForm).then((function(t){e.tableData=t.data.list,e.dataTotal=t.data.total})),Object(c["m"])({userId:this.searchForm.userId}).then((function(t){e.userDetail=t.data}))},refreshData:function(){var t=this;s(this.searchForm).then((function(e){t.tableData=e.data.list,t.dataTotal=e.data.total})),Object(c["m"])({userId:this.searchForm.userId}).then((function(e){t.userDetail=e.data})),this.$notify({message:"刷新完成",type:"success"})},showDataDetail:function(){var t=this;this.forwardFlowDialog=!0,Object(c["h"])({userId:this.searchForm.userId}).then((function(e){t.forwardFlowList=e.data}))},handleSizeChange:function(t){this.searchForm.pageSize=t,this.getData()},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.getData()},showStartDialog:function(t){this.startDialog=!0,this.addForm.serverId=t.serverId,this.addForm.portId=t.portId,this.addForm.remotePort=t.remotePort,this.addForm.remoteHost=t.remoteHost},stopForward:function(t){var e=this;this.addForm.serverId=t.serverId,this.addForm.portId=t.portId,this.$set(t,"btnLoading",!0),l(this.addForm).then((function(a){e.$set(t,"btnLoading",!1),e.$notify({message:"停止完成",type:"success"}),e.getData()}))},showContactInfo:function(){var t=this;this.contactInfoDialog=!0,Object(d["b"])({}).then((function(e){t.contactInfo=e.data}))},getFlow:function(t){var e="";if(t/1024<1024)e=(Math.round(t/1024)>0?Math.round(t/1024):0)+"KB";else if(t/1024>=1024&&t/1024/1024<1024)e=(Math.round(t/1024/1024)>0?Math.round(t/1024/1024):0)+"MB";else if(t/1024/1024>=1024){var a=t/1024/1024/1024;e=a.toFixed(3)+"GB"}else e="0KB";return e}}},m=f,p=(a("0732"),a("c7a8"),a("2877")),h=Object(p["a"])(m,r,o,!1,null,"2e7b175b",null);e["default"]=h.exports},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"5a30":function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},8593:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return c}));var r=a("b775"),o=a("5a30"),n=a.n(o);function s(t){return Object(r["a"])({url:"/system/exportData",method:"get",params:t})}function i(t){var e=new n.a;return e.append("file",t.file),Object(r["a"])({method:"post",url:"/system/importData",headers:{"Content-Type":"multipart/form-data"},data:e})}function l(t){return Object(r["a"])({url:"/sysConfig/save",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/sysConfig/getSysConfig",method:"get",params:t})}},a9e3:function(t,e,a){"use strict";var r=a("83ab"),o=a("da84"),n=a("94ca"),s=a("6eeb"),i=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),m=a("241c").f,p=a("06cf").f,h=a("9bf2").f,b=a("58a8").trim,g="Number",v=o[g],w=v.prototype,F=l(f(w))==g,I=function(t){var e,a,r,o,n,s,i,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=b(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(n=c.slice(2),s=n.length,i=0;i<s;i++)if(l=n.charCodeAt(i),l<48||l>o)return NaN;return parseInt(n,r)}return+c};if(n(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var D,_=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof _&&(F?d((function(){w.valueOf.call(a)})):l(a)!=g)?c(new v(I(e)),a,_):I(e)},y=r?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;y.length>x;x++)i(v,D=y[x])&&!i(_,D)&&h(_,D,p(v,D));_.prototype=w,w.constructor=_,s(o,g,_)}},b680:function(t,e,a){"use strict";var r=a("23e7"),o=a("a691"),n=a("408a"),s=a("1148"),i=a("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){l.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,r,i,l=n(this),f=o(t),m=[0,0,0,0,0,0],p="",h="0",b=function(t,e){var a=-1,r=e;while(++a<6)r+=t*m[a],m[a]=r%1e7,r=c(r/1e7)},g=function(t){var e=6,a=0;while(--e>=0)a+=m[e],m[e]=c(a/t),a=a%t*1e7},v=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==m[t]){var a=String(m[t]);e=""===e?a:e+s.call("0",7-a.length)+a}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(e=d(l*u(2,69,1))-69,a=e<0?l*u(2,-e,1):l/u(2,e,1),a*=4503599627370496,e=52-e,e>0){b(0,a),r=f;while(r>=7)b(1e7,0),r-=7;b(u(10,r,1),0),r=e-1;while(r>=23)g(1<<23),r-=23;g(1<<r),b(1,1),g(2),h=v()}else b(0,a),b(1<<-e,0),h=v()+s.call("0",f);return f>0?(i=h.length,h=p+(i<=f?"0."+s.call("0",f-i)+h:h.slice(0,i-f)+"."+h.slice(i-f))):h=p+h,h}})},c7a8:function(t,e,a){"use strict";var r=a("1d2c"),o=a.n(r);o.a},d3f9:function(t,e,a){}}]);